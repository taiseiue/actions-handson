name: 01 Fork And Setup

on:
  workflow_dispatch:

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Notify to Slack
        run: |
          TS=$(date +%s)
          cat <<EOF > payload.json
          {
            "channel": "dev-ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³_ãƒãƒ³ã‚ºã‚ªãƒ³",
            # "thread_ts": "1756085756.447339",
            "thread_ts": "1756095692.513299",
            "attachments": [
              {
                "fallback": "ãƒãƒ³ã‚ºã‚ªãƒ³ 01_fork_and_setup ã®é€šçŸ¥",
                "color": "#215EBF",
                "pretext": "01 Fork And Setup âœ… <!channel>",
                "author_name": ":github_white: ${{ vars.AUTHOR_NAME }}",
                "title": "Github Repository",
                "title_link": "${{ vars.REPOSITORY }}",
                "text": ":speech_balloon: ${{ vars.MESSAGE }}",
                "footer": "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³_ãƒãƒ³ã‚ºã‚ªãƒ³ BOT",
                "footer_icon": "https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1022001%2F30818b78-45d7-bac7-12b9-8433c2ef3011.png?ixlib=rb-4.0.0&auto=format&gif-q=60&q=75&s=035dfbe9921b278308e895b5e03dab1a",
                "ts": $TS
              }
            ]
          }
          EOF
          if curl --fail --show-error -X POST -H 'Content-type: application/json' --data @payload.json ${{ secrets.SLACK_WEBHOOK_URL }}; then
            echo "ğŸš€ Slack é€šçŸ¥æˆåŠŸ"
          else
            echo "âŒ Slack é€šçŸ¥å¤±æ•—"
            exit 1
          fi
